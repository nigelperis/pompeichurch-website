---
import { Image } from 'astro:assets';

import image1 from '~/assets/gallery/g1.jpeg';
import image2 from '~/assets/gallery/g2.jpg';
import image3 from '~/assets/gallery/ciborium.jpg';
import image4 from '~/assets/gallery/sacrament.jpg';
import image5 from '~/assets/gallery/sacrament1.jpg';
import image6 from '~/assets/gallery/charel.jpg';
import image7 from '~/assets/gallery/mary-inside.jpg';
import image8 from '~/assets/gallery/monthi-festh.jpg';
import image9 from '~/assets/gallery/monthi-festh1.jpg';
import image10 from '~/assets/gallery/g3.jpg';
import image11 from '~/assets/gallery/g4.jpg';
import image12 from '~/assets/gallery/g5.jpg';
import image13 from '~/assets/gallery/g6.jpg';
import image14 from '~/assets/gallery/g7.jpg';
import image15 from '~/assets/gallery/g8.jpeg';
import image16 from '~/assets/gallery/g9.jpg';
import image17 from '~/assets/gallery/g10.jpg';
import image18 from '~/assets/gallery/g11.jpg';
import image19 from '~/assets/gallery/g12.jpg';
import image20 from '~/assets/gallery/g13.jpg';
import image21 from '~/assets/gallery/g14.jpg';
import image22 from '~/assets/gallery/g15.jpg';
import image23 from '~/assets/gallery/g16.jpg';
import image24 from '~/assets/gallery/g17.jpg';
import image25 from '~/assets/gallery/g18.jpg';
import image26 from '~/assets/gallery/g19.jpg';

const images = [
	image1,
	image2,
	image3,
	image4,
	image5,
	image6,
	image7,
	image8,
	image9,
	image10,
	image11,
	image12,
	image13,
	image14,
	image15,
	image16,
	image17,
	image18,
	image19,
	image20,
	image21,
	image22,
	image23,
	image24,
	image25,
	image26,
] as const;
---

<div class="masonry-grid relative m-4 mx-auto min-h-screen w-full">
	{
		images.map((image) => (
			<a
				href="javascript:void(0);"
				data-pswp-src={image.src}
				data-pswp-width={image.width}
				data-pswp-height={image.height}
				class="masonry-grid-item-link masonry-grid-item inline-block w-1/2 lg:w-1/3"
			>
				<Image
					src={image}
					class="overflow-hidden rounded-md object-cover p-1"
					alt={'Gallery image'}
				/>
			</a>
		))
	}
</div>

<script>
	import Masonry from 'masonry-layout';
	import 'photoswipe/style.css';
	import PhotoSwipeLightbox from 'photoswipe/lightbox';
	import imagesLoaded from 'imagesloaded';

	const masonryGrid = document.querySelector<HTMLDivElement>('.masonry-grid')!;

	const masonry = new Masonry(masonryGrid, {
		itemSelector: '.masonry-grid-item',
		resize: true,
		percentPosition: true,
		transitionDuration: 300,
	});

	imagesLoaded(masonryGrid).on('progress', () => {
		masonry?.layout?.();
	});

	const lightbox = new PhotoSwipeLightbox({
		mainClass: 'pswp--custom-icon-colors',
		gallery: '.masonry-grid',
		children: 'a',
		pswpModule: () => import('photoswipe'),
	});

	lightbox.init();
</script>
