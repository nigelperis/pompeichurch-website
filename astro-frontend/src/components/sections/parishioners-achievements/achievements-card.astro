---
import { getLangFromUrl, useTranslations } from "~/i18n/utils";
import NetworkImage from "~/components/ui/network-image.astro";
import Badge from "~/assets/icons/badge.svg";
import { Icon } from "astro-icon/components";
import { Locale } from "~/enums/locale";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

interface Props {
  name: string;
  imageUrl: string;
  achievement: string;
  slug: string;
  imageWidth: number;
  imageHeight: number;
}

const { name, imageUrl, achievement, slug, imageWidth, imageHeight } =
  Astro.props;

const achieverUrl =
  lang === Locale.EN
    ? `/parishioners-achievements/${slug}`
    : `/kok/parishioners-achievements/${slug}`;
---

<div
  class="relative mx-auto mt-20 mb-9 w-[300px] bg-white border border-slate-200 rounded-lg"
>
  <NetworkImage
    src={imageUrl}
    alt={name}
    width={imageWidth ?? 600}
    height={imageHeight ?? 400}
    class="-mt-15 mx-auto w-[250px] h-[250px] rounded-lg object-cover"
  />
  <h2
    class="mt-3 mx-2 p-1 text-balance text-center text-3xl font-bold text-black lg:text-2xl"
  >
    {name}
  </h2>
  <p
    class="mt-2 mx-1 mb-15 p-2 text-balance text-center text-xl text-slate-900 lg:text-lg"
  >
    {achievement}
  </p>
  <div class="absolute right-0 bottom-0 text-blue-500">
    <a href={achieverUrl} class="flex my-4 mr-3">
      <span class={lang === Locale.KOK ? "mt-1" : ""}
        >{t("ui.more-button-read")}</span
      >
      <Icon
        name="chevron-right"
        class="stroke-2 text-2xl"
        data-icon-name="chevron-right"
      />
    </a>
  </div>

  <Badge class="absolute -bottom-8 -left-5 w-20 h-20" />
</div>
