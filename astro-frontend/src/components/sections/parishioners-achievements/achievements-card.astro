---
import { getLangFromUrl, useTranslations } from "~/i18n/utils";
import NetworkImage from "~/components/ui/network-image.astro";
import Badge from "~/assets/icons/badge.svg";
import { Icon } from "astro-icon/components";
import { Locale } from "~/enums/locale";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

interface Props {
  name: string;
  imageUrl: string;
  achievement: string;
  slug: string;
  imageWidth: number;
  imageHeight: number;
}

const { name, imageUrl, achievement, slug, imageWidth, imageHeight } =
  Astro.props;

const achieverUrl =
  lang === Locale.EN
    ? `/parishioners-achievements/${slug}`
    : `/kok/parishioners-achievements/${slug}`;
---

<div
  class="relative mx-auto mt-25 mb-9 w-[330px] bg-white border border-slate-200 rounded-3xl"
>
  <NetworkImage
    src={imageUrl}
    alt={name}
    width={imageWidth ?? 600}
    height={imageHeight ?? 400}
    class="-mt-25 mx-auto w-[260px] h-[260px] rounded-3xl object-cover"
  />
  <h2
    class="mt-3 mx-2 p-4 text-balance text-center text-2xl font-medium text-black lg:text-2xl"
  >
    {name}
  </h2>
  <p
    class="mt-2 mx-1 mb-20 p-2 text-balance text-center text-lg text-slate-900"
  >
    {achievement}
  </p>
  <div class="absolute right-0 bottom-0 flex text-red-500 border border-red-500 rounded-full p-2 m-3">
    <a href={achieverUrl} class="flex">
      <span class={lang === Locale.KOK ? "mt-1" : ""}
        >{t("ui.more-button-read")}</span
      >
      <Icon
        name="chevron-right"
        class="stroke-2 text-2xl"
        data-icon-name="chevron-right"
      />
    </a>
  </div>

  <Badge class="absolute -bottom-9 -left-9 w-18 h-18 transform translate-x-[-2px] translate-y-[-2px]" />
</div>
