---
import ObituaryCard from '~/components/obituary-card.astro';
import { getPlaceholderImage } from '~/helpers/get-placeholder-image';
import { listObituaries } from '~/services/obituaries/list-obituaries';

const data = await listObituaries();
---

<div
	class="mx-auto grid w-full max-w-4xl gap-x-20 gap-y-10 xs:grid-cols-1 md:grid-cols-2"
>
	{
		data?.map((item) => (
			<ObituaryCard
				name={item.name}
				imageUrl={
            item.image.url
              ? new URL(
                  item.image.url,
                  import.meta.env.STRAPI_URL,
                ).toString()
              : getPlaceholderImage()
          }
				imageWidth={item.image.width ?? 0}
				imageHeight={item.image.height ?? 0}
				description={item.description}
				age={item.age}
				ward={item.ward}
				date={item.dateOfDeath}
				class="m-auto"
			/>
		))
	}
</div>
