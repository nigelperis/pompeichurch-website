---
import { Image } from "astro:assets";
import { cn } from "~/helpers/cn";

interface Props {
  src: string;
  baseUrl?: string;
  width: number;
  height: number;
  sizes?: string;
  alt?: string;
  class?: string;
}

const {
  src,
  baseUrl,
  width,
  height,
  sizes,
  alt,
  class: className,
  ...rest
} = Astro.props;

const urlToUse = baseUrl
  ? new URL(src, baseUrl)
  : new URL(src, import.meta.env.PUBLIC_STRAPI_URL);
---

<Image
  src={urlToUse.toString()}
  width={width}
  height={height}
  sizes={sizes}
  alt={alt ?? "no alternative  text found"}
  class={cn("", className)}
  {...rest}
/>
