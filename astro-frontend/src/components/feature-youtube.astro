---
import EmblaCarouselItem from "./ui/embla-carousel-item.astro";
import EmblaCarousel from "./ui/embla-carousel.astro";
import { Image } from "astro:assets";
import YtThumbnail from "~/assets/gallery/yt-thumbnail.jpg";
import HoverableLink from "./ui/hoverable-link.astro";
import { getLangFromUrl, useTranslations } from "~/i18n/utils";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const videos = [
	{
		url: "https://www.youtube.com/embed/D2L0KUvmZB4"
	},
  {
    url: "https://www.youtube.com/embed/kL2WebNdPXc",
  },
  {
    url: "https://www.youtube.com/embed/TQVrdZetQ3o",
  },
  {
    url: "https://www.youtube.com/embed/8PtMr1u7_X0",
  },
];
---

<div class="-mx-[1.5rem] lg:hidden">
  <EmblaCarousel showArrows={true}>
    {
      videos.map((video) => (
        <EmblaCarouselItem>
          <div class="w-full flex-shrink-0">
            <iframe
              width="100%"
              height="200"
              src={video.url}
              loading="lazy"
              title="Youtube vidoes about History of Pompei Church"
              allow="accelerometer; encrypted-media; gyroscope; picture-in-picture"
              allowfullscreen
              class="aspect-video rounded-xl"
            />
          </div>
        </EmblaCarouselItem>
      ))
    }

    <EmblaCarouselItem>
      <div class="relative h-full w-full flex-shrink-0 rounded-xl text-center">
        <Image src={YtThumbnail} alt="Watch more" class="h-full rounded-xl" />
        <div class="absolute inset-0 rounded-xl bg-black/60"></div>
        <div class="absolute inset-0 flex h-[200] items-center justify-center">
          <HoverableLink
            href="https://www.youtube.com/@pompeichurchmedia8386"
            class="mb-2 mt-2 inline-block text-xl font-bold text-white"
            target="_blank"
          >
            Watch More
          </HoverableLink>
        </div>
      </div>
    </EmblaCarouselItem>
  </EmblaCarousel>
</div>

<div class="hidden gap-6 md:flex">
  {
    videos.slice(0, 2).map((video) => (
      <div class="w-1/3">
        <iframe
          width="100%"
          height="250"
          src={video.url}
          loading="lazy"
          title="YouTube Video"
          allow="accelerometer; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen
          class="rounded-xl"
        />
      </div>
    ))
  }

  <div class="relative w-1/3">
    <Image
      src={YtThumbnail}
      alt="Watch more"
      class="h-full w-full rounded-xl object-cover"
    />
    <div class="absolute inset-0 rounded-xl bg-black/65"></div>
    <div class="absolute inset-0 flex items-center justify-center">
      <HoverableLink
        href="https://www.youtube.com/@pompeichurchmedia8386"
        class="px-4 py-2 text-xl font-bold text-white"
        target="_blank"
      >
        Watch More
      </HoverableLink>
    </div>
  </div>
</div>
