---
import { Image } from 'astro:assets';
import { cn } from '~/helpers/cn';
import { getLangFromUrl, useTranslations } from '~/i18n/utils';
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

interface Props {
	name: string;
	imageUrl: ImageMetadata;
	date?: string;
	subtitle?: string;
	class?: string;
}

const {
	name,
	date,
	subtitle,
	class: className,
	imageUrl,
	...rest
} = Astro.props;
---

<div
	class={cn(
		'hover:scale-[1.01] hover:shadow-md snap-start first:snap-align-none max-w-xs flex-shrink-0 rounded-md border shadow sm:w-64',
		className,
		'w-[230px] h-[340px]',
	)}
	{...rest}
>
	<div class="card-image flex-none">
		<Image
			src={imageUrl}
			alt="Image"
			class="h-[230px] w-full rounded-md object-fill"
		/>
	</div>

	<div class="card-content mt-3 flex flex-1 flex-col justify-end space-y-1 p-3">
		<h3
			class="card-title font-bold leading-snug text-slate-900 sm:text-lg"
			title={name}
		>
			{name}
		</h3>
		{
			date && (
				<p class="card-date line-clamp-3 text-slate-700 sm:text-sm">
					{t('priest.service-period')}:{' '}
					<span class="font-semibold">{date}</span>
				</p>
			)
		}
		{
			subtitle && (
				<p class="card-subtitle line-clamp-3 text-slate-600 sm:text-sm">
					{subtitle}
				</p>
			)
		}
	</div>
</div>
