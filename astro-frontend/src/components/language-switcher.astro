---
import { Locale } from "~/enums/locale";

const currentLocale = Astro.currentLocale;
const currentPath = Astro.url.pathname;
const search = Astro.url.search;
const hash = Astro.url.hash;

const isKok = currentLocale === Locale.KOK;
const buttonLabel = isKok ? "English" : "ಕೊಂಕಣಿ";

let switchPath: string;
if (isKok) {
  switchPath = currentPath.replace(/^\/kok/, "") || "/";
} else {
  switchPath = `/kok${currentPath}`;
}
const switchUrl = `${switchPath}${search}${hash}`;

const fontFamily = isKok
  ? "'Roboto', sans-serif"
  : "'Noto Sans Kannada', sans-serif";

const buttonClasses = 'w-25 flex items-center justify-center border border-gray-300 px-2 py-2 font-semibold transition-colors hover:bg-gray-100';
const textClasses = !isKok ? 'inline-block transform translate-y-1' : 'inline-block';
---

<a
  href={switchUrl}
  class={buttonClasses}
  style={`font-family: ${fontFamily};`}
  aria-label={`Switch language to ${buttonLabel}`}
>
  <span class={textClasses}>
    {buttonLabel}
  </span>
</a>
