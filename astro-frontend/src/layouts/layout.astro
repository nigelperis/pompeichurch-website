---
import '@fontsource-variable/noto-sans-kannada';
import '@fontsource-variable/roboto';

import 'aos/dist/aos.css';

import Navbar from '~/components/navbar.astro';
import Breadcrumbs from '~/components/breadcrumbs.astro';
import Footer from '~/components/footer.astro';
import ScrollTop from '~/components/scroll-top.astro';
import GoogleAnalytics from '~/components/google-analytics.astro';
import "~/styles/global.css";
import { cn } from "~/helpers/cn";
import { getRelativeLocaleUrl } from "astro:i18n";
import { getLangFromUrl } from '~/i18n/utils';
import { Locale } from '~/enums/locale';
import { Hreflang } from "~/enums/hreflang";

const lang = getLangFromUrl(Astro.url);
const currentPath = Astro.url.pathname;
const localePrefix = lang === Locale.KOK ? `/${Locale.KOK}` : "";
const pathWithoutLocale = currentPath.startsWith(localePrefix)
  ? currentPath.slice(localePrefix.length)
  : currentPath;

const hreflangEn = new URL(getRelativeLocaleUrl(Locale.EN, pathWithoutLocale), Astro.site).toString();
const hreflangKok = new URL(getRelativeLocaleUrl(Locale.KOK, pathWithoutLocale), Astro.site).toString();
const hreflangDefault = hreflangEn;

export interface Props {
  title: string;
  description?: string;
  image?: string;
  url?: string;
}

const { title, description, image, url } = Astro.props;

const defaultDescriptions = {
  [Locale.KOK]: "‡≤ï‡≥ä‡≤°‡≥ç‡≤Ø‡≤æ‡≤≥‡≥ç ‡≤•‡≤æ‡≤µ‡≥ç‡≤®‡≥ç ‡≤Æ‡≥Ç‡≤°‡≤¨‡≤ø‡≤¶‡≥ç‡≤∞‡≤ø ‡≤µ‡≥Ü‡≤ö‡≥ç‡≤Ø‡≤æ ‡≤µ‡≤æ‡≤ü‡≥Ü‡≤∞‡≥ç, ‡≤≤‡≤ó‡≥ç‡≤¨‡≤ó‡≥ç ‡≥®‡≥¶ ‡≤ï‡≤ø.‡≤Æ‡≥Ä ‡≤™‡≤∞‡≤ø‡≤ß‡≤ø ‡≤≠‡≤ø‡≤§‡≤∞‡≥ç ‡≤Ö‡≤∏‡≥ç‡≤§‡≤ø‡≤§‡≥ç‡≤µ‡≤æ‡≤∞‡≥ç ‡≤Ü‡≤∏‡≥ç‡≤ö‡≤ø ‡≤™‡≥ä‡≤Ç‡≤™‡≤Ø‡≥ç ‡≤Æ‡≤æ‡≤Ø‡≥Ü‡≤ï‡≥ç ‡≤∏‡≤Æ‡≤∞‡≥ç‡≤™‡≤ø‡≤≤‡≥ç‡≤≤‡≤ø ‡≤ó‡≥Å‡≤∞‡≥ç‡≤™‡≥Å‡≤∞‡≥ç ‡≤µ ‡≤ï‡≥å‡≤°‡≥Ç‡≤∞‡≥ç ‡≤´‡≤ø‡≤∞‡≥ç‡≤ó‡≤ú‡≥ç ‡≤Ü‡≤™‡≥ç‡≤≤‡≥ç‡≤Ø‡≤æ ‡≤ó‡≥Ç‡≤Ç‡≤°‡≥ç ‡≤ê‡≤§‡≤ø‡≤π‡≤æ‡≤∏‡≤ø‡≤ï‡≥ç ‡≤Ü‡≤®‡≤ø ‡≤Ü‡≤ß‡≥ç‡≤Ø‡≤æ‡≤§‡≥ç‡≤Æ‡≤ø‡≤ï‡≥ç ‡≤∏‡≤Ç‡≤ó‡≥ç‡≤§‡≤ø‡≤®‡≤ø ‡≤≠‡≤∞‡≥ä‡≤®‡≥ç ‡≤ú‡≤ø‡≤µ‡≤æ‡≤≥‡≥ç ‡≤ú‡≤æ‡≤µ‡≥ç‡≤®‡≥ç ‡≤Ü‡≤∏‡≤æ",
  [Locale.EN]: "Gurpur Parish, also known as Kowdur, is 19 km from Mangalore on the Moodbidri road, with deep historical and spiritual roots."
};


const pageDescription = description || defaultDescriptions[lang] || defaultDescriptions[Locale.EN];
const pageImage = image || "https://pompeichurch.in/church-hero.jpg";
const pageUrl = url || "https://pompeichurch.in/";
---

<!doctype html>
<html lang={lang}>
<head>
<GoogleAnalytics measurementId={'G-4HPXW69JQV'} />
<meta charset="UTF-8" />
<meta
  name="description"
  content={pageDescription}
/>
<meta name="viewport" content="width=device-width" />
<meta
  name="viewport"
  content="width=device-width, initial-scale=1.0"
/>

<meta property="og:type" content="website" />
<meta property="og:url" content={pageUrl} />
<meta property="og:title" content={title || "Our Lady of Pompei Church | Gurpur Kaikamba"} />
<meta property="og:description" content={pageDescription} />
<meta property="og:image" content={pageImage} />
<meta property="og:image:alt" content={title || "Image of Our Lady of Pompei Church, Gurpur Kaikamba"} />

<meta property="twitter:card" content="summary_large_image" />
<meta property="twitter:url" content={pageUrl} />
<meta property="twitter:title" content={title || "Our Lady of Pompei Church | Gurpur Kaikamba"} />
<meta property="twitter:description" content={pageDescription} />
<meta property="twitter:image" content={pageImage} />
<meta property="twitter:image:alt" content={title || "Image of Our Lady of Pompei Church, Gurpur Kaikamba"} />

<meta name="apple-mobile-web-app-title" content="PompeiChurch" />
<meta name="msvalidate.01" content="BEA18465C48B90A839493EB6EE14A0BD" />
<meta name="keywords" content="Gurpur Church, Pompei Church, Kaikamba Church" />

<link rel="alternate" hreflang={Hreflang.X_DEFAULT} href={hreflangDefault} />
<link rel="alternate" hreflang={Hreflang.EN} href={hreflangEn} />
<link rel="alternate" hreflang={Hreflang.KOK} href={hreflangKok} />

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<link rel="apple-touch-icon" href="/apple-touch-icon.png" />
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
<link rel="manifest" href="/site.webmanifest" />
<link rel="sitemap" href="/sitemap-index.xml" />

<meta name="generator" content={Astro.generator} />
<title>{title}</title>
{
  import.meta.env.MODE === 'production' &&
  import.meta.env.PUBLIC_ENVIRONMENT === 'production' && (
    <script type="text/javascript">
      (function (c, l, a, r, i, t, y) {
        c[a] =
          c[a] ||
          function () {
            (c[a].q = c[a].q || []).push(arguments);
          };
        t = l.createElement(r);
        t.async = 1;
        t.src = 'https://www.clarity.ms/tag/' + i;
        y = l.getElementsByTagName(r)[0];
        y.parentNode.insertBefore(t, y);
      })(window, document, 'clarity', 'script', 'oxa7yg1jfv');
    </script>
  )
}
</head>
<body class={cn("w-screen overflow-x-hidden font-roboto", {
  "font-noto-sans-kannada": lang === Locale.KOK,
})}>
  <Navbar />
  <Breadcrumbs/>
  <slot />
  <Footer />
  <ScrollTop />
  <script>
    console.log("Est Nov, 2024 ü•É www.nigelperis.dev")
    import { aosInit } from '~/helpers/aos-config';
    aosInit();
  </script>
</body>
</html>
